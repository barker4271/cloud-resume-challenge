<%
// views/blog.ejs
// This page displays all blog posts pulled from Azure Cosmos DB
// It assumes `posts` is passed in as an array from server.js
%>

<section class="page">
  <header class="page-header">
    <h1>Blog</h1>
    <p class="page-subtitle">
      Thoughts, notes, and experiments from the Wookiee engineering desk.
    </p>
  </header>

  <div class="page-actions">
    <a href="/blog/new" class="button primary">
      + Add New Blog Post
    </a>
  </div>

  <div class="blog-list">
    <% if (!posts || posts.length === 0) { %>
      <p class="empty-state">
        No blog posts yet. Be the first to post!
      </p>
    <% } else { %>
      <% posts.forEach(post => { %>
        <article class="blog-post">
          <header>
            <h2><%= post.topic %></h2>
            <time datetime="<%= post.createdAt %>">
              <%= new Date(post.createdAt).toLocaleString() %>
            </time>
          </header>

          <div class="blog-body">
            <p><%= post.body %></p>
          </div>
        </article>
      <% }) %>
    <% } %>
  </div>
</section>
