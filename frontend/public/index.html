<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Ken Barker - Professional Resume</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
<main class="wrap" id="main">
  <header>
    <div class="name-block">
      <h1 class="name">Ken Barker</h1>
      <div class="title">Director, Program & Project Management</div>
    </div>
    <div class="actions">
      <a class="btn btn-primary" href="#download" onclick="window.print();return false;">Print / Save PDF</a>
    </div>
  </header>

  <section class="resume">

    <!-- Sections -->
    <article class="card section" id="experience-section">
      <h2>Professional Experience</h2>
      <div class="section-content" id="experience-container"></div>
    </article>

    <article class="card section" id="education-section">
      <h2>Education</h2>
      <div class="section-content" id="education-container"></div>
    </article>

    <article class="card section" id="skills-section">
      <h2>Skills</h2>
      <div class="section-content skills" id="skills-container"></div>
    </article>

    <article class="card section" id="languages-section">
      <h2>Languages</h2>
      <div class="section-content small muted" id="languages-container"></div>
    </article>

  </section>

  <footer style="margin-top:18px;text-align:center" class="muted small">
    Last updated: Nov 25, 2025
  </footer>
</main>

<script>
// Reusable function to fetch and render sections
async function renderSection(url, containerId, renderItem) {
  try {
    const res = await fetch(url);
    if (!res.ok) throw new Error(`Failed to fetch ${url}`);
    const data = await res.json();
    const container = document.getElementById(containerId);
    container.innerHTML = ''; // clear container
    data.forEach(item => renderItem(item, container));
  } catch (err) {
    console.error(err);
  }
}

// Render functions for each type of data
const renderExperience = (job, container) => {
  const div = document.createElement('div');
  div.classList.add('job');
  div.innerHTML = `
    <div class="job-title">${job.title}</div>
    <div class="job-meta">${job.client} — ${job.location} • ${job.dates}</div>
    <div class="job-desc">${job.description}</div>
  `;
  container.appendChild(div);
};

const renderEducation = (edu, container) => {
  if (edu.degree) {
    container.innerHTML += `<div><strong>${edu.degree}</strong> — ${edu.school}, ${edu.year}</div>`;
  }
  if (edu.certificates) {
    container.innerHTML += `<div><strong>Professional Certificates:</strong> ${edu.certificates.join(', ')}</div>`;
  }
};

const renderSkill = (skill, container) => {
  const div = document.createElement('div');
  div.classList.add('skill');
  div.textContent = skill;
  container.appendChild(div);
};

const renderLanguages = (langList, container) => {
  container.textContent = langList.join(' · ');
};

// Load all sections
renderSection('/experience', 'experience-container', renderExperience);
renderSection('/education', 'education-container', renderEducation);
renderSection('/skills', 'skills-container', renderSkill);
renderSection('/languages', 'languages-container', renderLanguages);
</script>
</body>
</html>
